<div class="card mb-4 shadow-sm">

  <div class="card-body">
    <div class="row">
      <div class="col-md-auto">
        <h3>Code source</h3>
      </div>
      <div class="col-12 col-md">
        <div class="row">
          <div class="col-auto">
            <button type="button" (click)="onSauvegarderSous()" class="btn btn-danger">Sauvegarder</button>
          </div>
          <div class="col-auto">
            <label class="btn btn-primary btn-file">
              Charger<input type="file" accept=".djn,.txt" style="display: none;" (change)="onOuvrirFichier($event)">
            </label>
          </div>
          <div class="col-12 col-md-auto">
            <div class="input-group mb-3">
              <input #txCommande type="text" maxlength="25" [(ngModel)]="nomExemple" class="form-control"
                placeholder="nom dâ€™un exemple">
              <div class="input-group-append">
                <button [disabled]="!nomExemple" class="btn btn-secondary" (click)="onChargerExemple()" type="button"
                  id="btExecuter">Charger ex.</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="card content-container mb-2"> -->
    <div class="card mb-2" [style.height]="(2 + ((hauteurLigneCode) * nbLignesCode)) + 'px'">
      <ace #codeEditor [config]="config" [(value)]="codeSource" [theme]="theme">
      </ace>
    </div>
    <div class="row">
      <div class="col-auto">
        <button type="button" (click)="onApercu()" class="btn btn-success mr-2">AperÃ§u</button>
      </div>
      <div class="col-auto">
        <button type="button" (click)="onJouer()" class="btn btn-warning">Jouer</button>
      </div>
      <div class="col-auto">
        <select [(ngModel)]="theme" (change)="onChangerTheme()" class="form-control" name="choixTheme">
          <option disabled>*** ThÃ¨mes clairs ***</option>
          <option [ngValue]="'chrome'">chrome</option>
          <option [ngValue]="'crimson_editor'">crimson_editor</option>
          <option [ngValue]="'katzenmilch'">katzenmilch</option>
          <option [ngValue]="'solarized_light'">solarized_light</option>
          <option [ngValue]="'tomorrow'">tomorrow</option>
          <option disabled>*** ThÃ¨mes foncÃ©s ***</option>
          <option [ngValue]="'ambiance'">ambiance</option>
          <option [ngValue]="'dracula'">dracula</option>
          <option [ngValue]="'monokai'">monokai</option>
          <option [ngValue]="'solarized_dark'">solarized_dark</option>
          <option [ngValue]="'vibrant_ink'">vibrant_ink</option>

        </select>
      </div>
      <div class="col-auto">
        <select [(ngModel)]="nbLignesCode" (change)="onChangerNbLignesCode()" class="form-control"
          name="choixNbLignesCodes">
          <option [ngValue]="10">10 lignes visibles</option>
          <option [ngValue]="15">15 lignes visibles</option>
          <option [ngValue]="20">20 lignes visibles</option>
          <option [ngValue]="25">25 lignes visibles</option>
          <option [ngValue]="30">30 lignes visibles</option>
          <option [ngValue]="35">35 lignes visibles</option>
          <option [ngValue]="40">40 lignes visibles</option>
          <option [ngValue]="50">50 lignes visibles</option>
          <option [ngValue]="60">60 lignes visibles</option>
          <option [ngValue]="70">70 lignes visibles</option>
          <option [ngValue]="80">80 lignes visibles</option>
        </select>
      </div>

      <div class="col-auto">
        <select [(ngModel)]="tailleTexte" (change)="onChangerTailleFont()" class="form-control"
          name="choixNbLignesCodes">
          <option [ngValue]="13">police 13</option>
          <option [ngValue]="14">police 14</option>
          <option [ngValue]="15">police 15</option>
          <option [ngValue]="16">police 16</option>
          <option [ngValue]="17">police 17</option>
          <option [ngValue]="18">police 18</option>
          <option [ngValue]="19">police 19</option>
          <option [ngValue]="20">police 20</option>
          <option [ngValue]="21">police 21</option>
          <option [ngValue]="22">police 22</option>
          <option [ngValue]="23">police 23</option>
          <option [ngValue]="24">police 24</option>
          <option [ngValue]="25">police 25</option>
        </select>
      </div>
    </div>
  </div>
</div>
<!-- Compilation -->
<div *ngIf="erreurs" class="card mb-4 shadow-sm">
  <div class="card-body">
    <h3>RÃ©sultat de la compilation</h3>

    <ng-container *ngIf="!codeSource || codeSource.trim() == ''">
      <div>
        <span class="text-warning">Moi je veux bien mais il nâ€™y a aucun code source Ã  traiter.â€¯ðŸ™„</span><br>
        <span class="text-primary">Pssst! Il est possible de charger un exemple pour commencer.â€¯ðŸ˜‰</span>
      </div>
    </ng-container>
    <ng-container *ngIf="codeSource && codeSource.trim() != ''">
      <div class="text-warning" *ngIf="monde.salles.length == 0">
        ðŸ™„ Je nâ€™ai pas trouvÃ© les lieux Ã  visiter !
      </div>
      <div class="text-success" *ngIf="erreurs.length == 0">
        ðŸ˜€ Superâ€¯! Je pense que jâ€™ai tout compris !
      </div>
      <div class="text-warning" *ngIf="erreurs.length > 0">
        ðŸ˜£ AÃ¯eâ€¯! Je nâ€™ai pas tout comprisâ€¦
      </div>
    </ng-container>

    <code class="text-danger">
      <span *ngFor="let err of erreurs">
          {{err}}<br>
      </span>
    </code>
  </div>
</div>
<!-- Jeu -->
<div *ngIf="mode == 'jeu'" class="card mb-4 shadow-sm">
  <div class="card-body">
    <h3>Jeu</h3>
    <app-lecteur [jeu]="jeu" [verbeux]="true"></app-lecteur>
  </div>
</div>
<!-- AperÃ§u -->
<div *ngIf="mode == 'apercu'" class="card mb-4 shadow-sm">
  <div class="card-body">
    <app-apercu-monde [monde]="monde" [regles]="regles" [actions]="actions"></app-apercu-monde>
  </div>
</div>